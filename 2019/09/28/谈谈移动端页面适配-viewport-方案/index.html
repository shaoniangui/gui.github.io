<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  <title>谈谈移动端页面适配(viewport)方案 | 少年癸</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="移动端页面适配(viewport)方案学习资料 理解viewport 大漠:再聊移动端页面适配 大漠:Vue使用vw实现移动端适配 Vue项目使用vw实现移动端适配教程 关于 rem/viewport/vw 的使用场景  目录 viewport是什么？ 1.1 浏览器可视化区域 1.2 移动设备中1px不等于1个物理像素 1.3 利用meta标签对viewport进行控制 1.4 viewport">
<meta property="og:type" content="article">
<meta property="og:title" content="谈谈移动端页面适配(viewport)方案">
<meta property="og:url" content="http://yoursite.com/2019/09/28/谈谈移动端页面适配-viewport-方案/index.html">
<meta property="og:site_name" content="少年癸">
<meta property="og:description" content="移动端页面适配(viewport)方案学习资料 理解viewport 大漠:再聊移动端页面适配 大漠:Vue使用vw实现移动端适配 Vue项目使用vw实现移动端适配教程 关于 rem/viewport/vw 的使用场景  目录 viewport是什么？ 1.1 浏览器可视化区域 1.2 移动设备中1px不等于1个物理像素 1.3 利用meta标签对viewport进行控制 1.4 viewport">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-09-27T18:59:57.379Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="谈谈移动端页面适配(viewport)方案">
<meta name="twitter:description" content="移动端页面适配(viewport)方案学习资料 理解viewport 大漠:再聊移动端页面适配 大漠:Vue使用vw实现移动端适配 Vue项目使用vw实现移动端适配教程 关于 rem/viewport/vw 的使用场景  目录 viewport是什么？ 1.1 浏览器可视化区域 1.2 移动设备中1px不等于1个物理像素 1.3 利用meta标签对viewport进行控制 1.4 viewport">
  
  <link rel="stylesheet" href="//cdn.bootcss.com/highlight.js/9.2.0/styles/github.min.css">
  <script src="//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', (event) => {
      document.querySelectorAll('pre code').forEach((block) => {
        hljs.highlightBlock(block);
      });
    });
  </script>
  <link rel="stylesheet" href="/css/index.css">
</head>
</html>
<body style="


  background-color: #eff0f6

">
  <div id="container">
    <nav id="nav">
  <header class="header">
    <a href="/" class="title">shaonian.gui</a>
  </header>
  <div class="ctnWrap">
    <div class="icons">
      
    </div>
    <div class="menu">
      
        
            <a href="/" class="nav-menu ">HOME</a>
          
        
            <a href="/archives" class="nav-menu ">ARCHIVE</a>
          
        
            <a href="/about" class="nav-menu ">ABOUT</a>
          
        
      
    </div>
  </div>
</nav>
    <div id="main"><section class="article">
  <h2 class="title">谈谈移动端页面适配(viewport)方案</h2>
  <p class="sub">Sep 28, 2019</p>
  <article class="content">
    <h1 id="移动端页面适配-viewport-方案"><a href="#移动端页面适配-viewport-方案" class="headerlink" title="移动端页面适配(viewport)方案"></a>移动端页面适配(viewport)方案</h1><h3 id="学习资料"><a href="#学习资料" class="headerlink" title="学习资料"></a>学习资料</h3><ol>
<li><a href="https://www.jianshu.com/p/b880b48fa028" target="_blank" rel="noopener">理解viewport</a></li>
<li><a href="https://www.w3cplus.com/css/vw-for-layout.html" target="_blank" rel="noopener">大漠:再聊移动端页面适配</a></li>
<li><a href="https://www.w3cplus.com/mobile/vw-layout-in-vue.html" target="_blank" rel="noopener">大漠:Vue使用vw实现移动端适配</a></li>
<li><a href="https://www.jianshu.com/p/eb0d00e8ffed" target="_blank" rel="noopener">Vue项目使用vw实现移动端适配教程</a></li>
<li><a href="https://juejin.im/post/5b50ad48e51d45195e0f6564" target="_blank" rel="noopener">关于 rem/viewport/vw 的使用场景</a></li>
</ol>
<h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><ol>
<li><p>viewport是什么？</p>
<p>1.1 浏览器可视化区域</p>
<p>1.2 移动设备中1px不等于1个物理像素</p>
<p>1.3 利用meta标签对viewport进行控制</p>
<p>1.4 viewport相关单位</p>
<p>1.5 适配支持机型</p>
</li>
<li><p>在项目中使用 Viewport</p>
<p>2.1 自动转换px为vw</p>
<p>2.2 Retina屏实现1px边框线</p>
<p>2.3 降级处理</p>
</li>
</ol>
<h2 id="1-viewport是什么？"><a href="#1-viewport是什么？" class="headerlink" title="1. viewport是什么？"></a>1. viewport是什么？</h2><blockquote>
<p>Viewport(视窗)，指浏览器可视化的区域。</p>
<p> viewport的大小决定了，在CSS中设置多少像素能占满浏览器窗口。</p>
<p>例如：viewport = 320,那么div的宽度为320px的话则能占满屏幕宽度。</p>
</blockquote>
<h3 id="1-1-浏览器可视化区域"><a href="#1-1-浏览器可视化区域" class="headerlink" title="1.1 浏览器可视化区域"></a>1.1 浏览器可视化区域</h3><blockquote>
<p> 视窗(Viewport)指的是浏览器可视化区域，如<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&gt; </span><br><span class="line">&gt;  浏览器支持：淘宝2015年的```Flexible```方案是通过```JavaScript```来模拟```vw```的特性，而到今天，视窗单位```vw```已经得到了众多浏览器的支持，可以直接考虑使用```vw```到我们的适配布局中。</span><br><span class="line"></span><br><span class="line">![图1:界面区域图](https://www.w3cplus.com/sites/default/files/blogs/2017/1707/vw-layout-4.png)</span><br><span class="line"></span><br><span class="line">### 1.2 ⚠️移动设备中1px不等于1个物理像素</span><br><span class="line"></span><br><span class="line">&gt; 如今，移动设备大多采用高倍屏，像素分辨率(物理)要比逻辑分辨率高，如下表：</span><br><span class="line">&gt; </span><br><span class="line">&gt; | 型号 | 像素分辨率 | 逻辑分辨率 | 倍率 |</span><br><span class="line">&gt; | ------ | ------ | ------ |</span><br><span class="line">&gt; | iPhone5 | 640*1136 | 320*568 | 2 |</span><br><span class="line">&gt; | iPhone6 | 750*1334 | 375*667 | 2 |</span><br><span class="line">&gt; | iPhone6 plus | 1242*2208 | 414*736 | 3 |</span><br><span class="line">&gt; </span><br><span class="line">&gt; 通过如下代码设置viewport宽度 等于 逻辑分辨率宽度(width=device-width)</span><br><span class="line">&gt; </span><br><span class="line">&gt; ```html</span><br><span class="line">&gt; &lt;meta id=&quot;viewport&quot; name=&quot;viewport&quot; content=&quot;width=device-width; initial-scale=1.0; maximum-scale=1; user-scalable=no;&quot;&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>此时，CSS中的1px是不等于一个物理像素的，而是等于倍率个物理像素。</p>
</blockquote>
<h3 id="1-3-利用meta标签对viewport进行控制"><a href="#1-3-利用meta标签对viewport进行控制" class="headerlink" title="1.3 利用meta标签对viewport进行控制"></a>1.3 利用meta标签对viewport进行控制</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">id</span>=<span class="string">"viewport"</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width; initial-scale=1.0; maximum-scale=1; user-scalable=no;"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>属性名</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>width</td>
<td>设置viewport的宽度，为一个正整数，或字符串”width-device”</td>
</tr>
<tr>
<td>initial-scale</td>
<td>设置页面的初始缩放值，为一个数字，可以带小数</td>
</tr>
<tr>
<td>minimum-scale</td>
<td>允许用户的最小缩放值，为一个数字，可以带小数</td>
</tr>
<tr>
<td>maximum-scale</td>
<td>允许用户的最大缩放值，为一个数字，可以带小数</td>
</tr>
<tr>
<td>height</td>
<td>设置viewport的高度，这个属性对我们并不重要，很少使用</td>
</tr>
<tr>
<td>user-scalable</td>
<td>是否允许用户进行缩放，值为”no”或”yes”, no 代表不允许，yes代表允许</td>
</tr>
</tbody></table>
<h3 id="1-4-viewport相关单位"><a href="#1-4-viewport相关单位" class="headerlink" title="1.4 viewport相关单位"></a>1.4 viewport相关单位</h3><blockquote>
<figure class="highlight plain"><figcaption><span>共有四个单位，分别为```vw``` ```vh``` ```vmin``` ```vmax```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; </span><br><span class="line">&gt; ```javascript</span><br><span class="line">&gt; &lt;meta id=&quot;viewport&quot; name=&quot;viewport&quot; content=&quot;width=device-width; initial-scale=1.0; maximum-scale=1; user-scalable=no;&quot;&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>vw：是Viewport’s width的简写，<figure class="highlight plain"><figcaption><span>的```1%```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; </span><br><span class="line">&gt; vh： 是Viewport&apos;s height的简写，```1vh```等于```window.innerHeight``` 的```1%</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>vmin：<figure class="highlight plain"><figcaption><span>和 ```vh``` 中较小的值</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; </span><br><span class="line">&gt; vmax：```vmax```取值于当前```vw``` 和 ```vh``` 中较小的值</span><br><span class="line"></span><br><span class="line">#### vmin 和 vmax</span><br><span class="line">&gt;  vmin和vmax比较绕，通俗来讲，如果</span><br><span class="line">&gt; </span><br><span class="line">&gt;  ```window.innerHeight &gt; window.innerWidth``` 则：</span><br><span class="line">&gt; </span><br><span class="line">&gt;  ```vmin```取```1%```的```window.innerWidth</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&gt; </span><br><span class="line">&gt; 如下图：</span><br><span class="line">&gt; </span><br><span class="line">&gt; ![img](https://www.w3cplus.com/sites/default/files/blogs/2017/1707/vw-layout-5.png)</span><br><span class="line"></span><br><span class="line">### 1.5 适配支持机型</span><br><span class="line">&gt; 测试手上机型是否支持 ```Viewport``` :[点击这里](https://www.w3.org/TR/css3-values/)</span><br><span class="line">&gt; </span><br><span class="line">&gt; Top30机型中，未得到支持的如下</span><br><span class="line">&gt;</span><br><span class="line">&gt; 目前大部分手机浏览器已支持``` viewport```，不需要额外做过多的兼容处理，如果业务特殊需要，也可通过插件方式进行降级处理，文末有简单介绍</span><br><span class="line">&gt; </span><br><span class="line">&gt; ![WX20190410-075624@2x](https://i.loli.net/2019/04/10/5cad4ec8904fd.png)</span><br><span class="line"></span><br><span class="line">## 2. 在项目中使用 ```Viewport</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>以下几个插件的使用方式可参考：<a href="https://juejin.im/post/5c10e8386fb9a049e82b60e5" target="_blank" rel="noopener">使用vw适配移动端</a></p>
<p>一般我们出视觉设计稿,都是基于iPhone 6屏幕来进行设计,也就是宽度为<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 2.1 自动转换px为vw</span><br><span class="line"></span><br><span class="line">&gt; 如上所见，我们就可以根据设计稿的```px```来转换为对应的```vw```值</span><br><span class="line">&gt; </span><br><span class="line">&gt; 但是，难道全部都需要我们手动转换？</span><br><span class="line">&gt; </span><br><span class="line">&gt; 当然不是，我们可以引入```PostCSS```插件```postcss-px-to-viewport```进行自动转换</span><br><span class="line">&gt; </span><br><span class="line">&gt; 这样我们就可以在代码中直接写```px```,这样岂不是很棒么。</span><br><span class="line"></span><br><span class="line">###### 举个例子：</span><br><span class="line"></span><br><span class="line">```css</span><br><span class="line"> .box&#123;</span><br><span class="line">     width: 369px;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p> 经过PostCSS编译后变成了我们想要的<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```css</span><br><span class="line"> .box&#123;</span><br><span class="line">     width: 49.2vw;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p>
<p>还可以根据实际项目对插件进行配置,参阅<a href="https://github.com/evrone/postcss-px-to-viewport" target="_blank" rel="noopener">官方文档</a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">"postcss-px-to-viewport": &#123;</span><br><span class="line">    viewportWidth: 750, // 视窗的宽度，对应的是我们设计稿的宽度，一般是750</span><br><span class="line">    viewportHeight: 1334, // 视窗的高度，根据750设备的宽度来指定，一般指定1334，也可以不配置</span><br><span class="line">    unitPrecision: 3, // 指定`px`转换为视窗单位值的小数位数（很多时候无法整除）</span><br><span class="line">    viewportUnit: 'vw', // 指定需要转换成的视窗单位，建议使用vw</span><br><span class="line">    selectorBlackList: ['.ignore', '.hairlines'], // 指定不转换为视窗单位的类，可以自定义，可以无限添加,建议定义一至两个通用的类名</span><br><span class="line">    minPixelValue: 1, // 小于或等于`1px`不转换为视窗单位，你也可以设置为你想要的值</span><br><span class="line">    mediaQuery: false // 允许在媒体查询中转换`px`</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面解决了<code>px</code>到<code>vw</code>的转换计算。根据相关的测试，在以下这些地方可以使用<code>vw</code>来适配我们的页面。</p>
<ul>
<li>容器适配，可以使用<code>vw</code></li>
<li>文本的适配，可以使用<code>vw</code></li>
<li>大于<code>1px</code>的边框、圆角、阴影都可以使用<code>vw</code></li>
<li>内距和外距，可以使用<code>vw</code></li>
</ul>
<h3 id="2-2-Retina屏实现1px边框线"><a href="#2-2-Retina屏实现1px边框线" class="headerlink" title="2.2 Retina屏实现1px边框线"></a>2.2 Retina屏实现1px边框线</h3><blockquote>
<p>参考资料：<a href="https://www.w3cplus.com/css/fix-1px-for-retina.html" target="_blank" rel="noopener">再谈Retina下1px的解决方案</a></p>
</blockquote>
<p>目前最常用的还是通过<figure class="highlight plain"><figcaption><span>插件 ```postcss-write-svg ```来解决这个问题，自动生成`border-image`或者`background-image`的图片</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##### 安装插件</span><br><span class="line"></span><br><span class="line">```powershell</span><br><span class="line">npm i -S postcss-write-svg</span><br></pre></td></tr></table></figure></p>
<h5 id="在代码中使用-两种方式-："><a href="#在代码中使用-两种方式-：" class="headerlink" title="在代码中使用(两种方式)："></a>在代码中使用(两种方式)：</h5><ol>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```css</span><br><span class="line">/* 建立通用样式 */</span><br><span class="line">@svg 1px-border &#123;</span><br><span class="line">   height: 2px; </span><br><span class="line">   @rect &#123; </span><br><span class="line">       fill: var(--color, black); </span><br><span class="line">       width: 100%; </span><br><span class="line">       height: 50%; </span><br><span class="line">    &#125;</span><br><span class="line"> &#125; </span><br><span class="line"> /* 使用 */</span><br><span class="line"> .example &#123;</span><br><span class="line">     border: 1px solid transparent;</span><br><span class="line">     border-image: svg(1px-border param(--color #00b1ff)) 2 2 stretch;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>PostCSS 会自动帮我们编译出来：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.example</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-image</span>: <span class="built_in">url</span>(<span class="string">"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' height='2px'%3E%3Crect fill='%2300b1ff' width='100%25' height='50%25'/%3E%3C/svg%3E"</span>) <span class="number">2</span> <span class="number">2</span> stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```css</span><br><span class="line">/* 建立通用样式 */</span><br><span class="line">@svg square &#123;</span><br><span class="line">    @rect &#123;</span><br><span class="line">        fill: var(--color, black);</span><br><span class="line">        width: 100%;</span><br><span class="line">        height: 100%;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">/* 使用 */</span><br><span class="line"></span><br><span class="line">#example &#123;</span><br><span class="line">    background: white svg(square param(--color #00b1ff));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>经过PostCSS编译后：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#example</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: white <span class="built_in">url</span>(<span class="string">"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg'%3E%3Crect fill='%2300b1ff' width='100%25' height='100%25'/%3E%3C/svg%3E"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-3-降级处理"><a href="#2-3-降级处理" class="headerlink" title="2.3 降级处理"></a>2.3 降级处理</h3><blockquote>
<p>前面提到过，到目前为止，T30的机型中还有几款机型是不支持<code>vw</code>的适配方案，一般来说我们已经不需要再去兼容，但是如果业务需要，应该怎么处理呢？有两种方式可以进行降级处理：</p>
<ul>
<li><strong>CSS Houdini</strong>：通过<a href="https://github.com/w3c/css-houdini-drafts/wiki" target="_blank" rel="noopener">CSS Houdini</a>针对<code>vw</code>做处理，调用<a href="https://www.w3.org/TR/css-typed-om-1" target="_blank" rel="noopener">CSS Typed OM Level1</a>  提供的<a href="https://www.w3.org/TR/css-typed-om-1/#numericvalue-serialization" target="_blank" rel="noopener"><code>CSSUnitValue</code>  API</a>。</li>
<li><strong>CSS Polyfill</strong>：通过相应的Polyfill做相应的处理，目前针对于<code>vw</code>单位的Polyfill主要有：<a href="https://github.com/saabi/vminpoly" target="_blank" rel="noopener">vminpoly</a>、<a href="https://github.com/rodneyrehm/viewport-units-buggyfill" target="_blank" rel="noopener">Viewport Units Buggyfill</a>、<a href="https://gist.github.com/LeaVerou/1347501" target="_blank" rel="noopener">vunits.js</a>和<a href="https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills" target="_blank" rel="noopener">Modernizr</a>。个人推荐采用<a href="https://github.com/rodneyrehm/viewport-units-buggyfill" target="_blank" rel="noopener">Viewport Units Buggyfill</a></li>
</ul>
</blockquote>
<h5 id="使用Viewport-Units-Buggyfill"><a href="#使用Viewport-Units-Buggyfill" class="headerlink" title="使用Viewport Units Buggyfill"></a>使用Viewport Units Buggyfill</h5><ol>
<li><p>在<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```css</span><br><span class="line">&lt;script src=&quot;//g.alicdn.com/fdilab/lib3rd/viewport-units-buggyfill/0.6.2/??viewport-units-buggyfill.hacks.min.js,viewport-units-buggyfill.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
</li>
<li><p>在<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  // vw兼容性处理viewport-units-buggyfill</span><br><span class="line">    window.onload = function () &#123;</span><br><span class="line">      window.viewportUnitsBuggyfill.init(&#123; hacks: window.viewportUnitsBuggyfillHacks &#125;);</span><br><span class="line">      //以下代码用户测试</span><br><span class="line">      // var winDPI = window.devicePixelRatio;</span><br><span class="line">      // var uAgent = window.navigator.userAgent;</span><br><span class="line">      // var screenHeight = window.screen.height;</span><br><span class="line">      // var screenWidth = window.screen.width;</span><br><span class="line">      // var winWidth = window.innerWidth;</span><br><span class="line">      // var winHeight = window.innerHeight;</span><br><span class="line">      // console.log(&quot;Windows DPI:&quot; + winDPI + &quot;;\ruAgent:&quot; + uAgent + &quot;;\rScreen Width:&quot; +</span><br><span class="line">      //   screenWidth + &quot;;\rScreen Height:&quot; + screenHeight + &quot;;\rWindow Width:&quot; + winWidth +</span><br><span class="line">      //   &quot;;\rWindow Height:&quot; + winHeight)</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
</li>
<li><p>具体的使用。在你的CSS中，只要使用到了viewport的单位（vw、vh、vmin或vmax ）地方，需要在样式中添加content：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.my-viewport-units-using-thingie &#123;</span><br><span class="line">    width: <span class="number">50</span>vmin;</span><br><span class="line">    height: <span class="number">50</span>vmax;</span><br><span class="line">    top: calc(<span class="number">50</span>vh - <span class="number">100</span>px);</span><br><span class="line">    left: calc(<span class="number">50</span>vw - <span class="number">100</span>px);</span><br><span class="line">    <span class="comment">/* hack to engage viewport-units-buggyfill */</span></span><br><span class="line">    content: <span class="string">'viewport-units-buggyfill; width: 50vmin; height: 50vmax; top: calc(50vh - 100px); left: calc(50vw - 100px);'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<blockquote>
<p>这可能会令你感到恶心，而且我们不可能每次写vw都去人肉的计算。特别是在我们的这个场景中，咱们使用了postcss-px-to-viewport这个插件来转换vw，更无法让我们人肉的去添加content内容。 这个时候就需要前面提到的postcss-viewport-units插件。这个插件将让你无需关注content的内容，插件会自动帮你处理。</p>
<p>兼容方面，具体可参阅<a href="https://www.w3cplus.com/mobile/vw-layout-in-vue.html" target="_blank" rel="noopener">如何在Vue项目中使用vw实现移动端适配</a></p>
<p>ps:目前来说，如非必要，已无需再进行兼容，因为基本上移动端都已支持最新特性。</p>
</blockquote>

  </article>
  <footer class="f-cf">
    
    
      <a href="/2019/09/28/first-article/" class="link f-fr">first article⟶</a>
    
  </footer>
</section></div>
    <footer id="footer" class="f-cf">
  
  
  <span class="copyright">All rights reserved @shaonian.gui</span>
</footer>
  </div>
</body>
</html>